<!DOCTYPE html>
<html>

<head>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  padding-left: 5px;
  padding-right: 5px;
  text-align: center;
}
img {
  image-rendering: pixelated; /* Nearest-neighbor scaling */
}

</style>

<meta name="description" content="Tibiantis Notes - Tibia 7.4 Annihilator Quest">
  <meta name="keywords" content="Tibiantis, Tibia, 7.4, anni, annihilator">
<meta title ="Tibiantis Notes - Annihilator quest">
<meta name="author" content="Tarsal">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

</head>


<body>
<a href="https://tibiantis-notes.github.io/">Home</a>
<h1>Tibia 7.4/ Tibiantis notes</h1>
<p><i>by Tarsal.</i></p>
<hr>
  

<div style="width: 900px">
<h1>Annihilator Quest</h1>

<h2>Introduction</h2>

This page discusses the Annihilator quest. An infamously difficult test of strength, skill and luck.<br><br>

<h2>Damage Analysis - set up</h2>
The quest must be completed by 4 Lv100+ players. There are 6 demons, and each of the four players can be hit by up to 3 energy beams.<br><br>

Demons cast fireballs dealing 110-200 fire damage with a chance of 1/3, and energy damage beams of damage 300-420 with a chance of 1/10. Due to CIP code, the 5 demons that are not in melee range will roll the chance to cast every second and the remaining demon every two seconds.<br><br>

The average damage on turn 1 and 2 is therefore 310 + 108 = 418, and 258 + 72 = 330, for an overall average of 374 damage.<br><br>

<h2>Damage Analysis - result</h2>

<canvas id="myChart" style="width:100%;max-width:600px"></canvas>

<script>


</script>

<p id="test1"></p>
<p id="test2"></p>

</div>

<script>

function calculate_distrib() {


document.getElementById('test1').innerHTML = "Start of code<br>";

let fireball_damage = new Array(200).fill(0);
let fireball_damage_intermediate = new Array(1300).fill(0);
let fireball_damage_total = new Array(1300).fill(0);
let fireball_damage_total_b = new Array(1300).fill(0);
let energy_damage = new Array(420).fill(0);
let energy_damage_intermediate = new Array(1300).fill(0);
let energy_damage_total = new Array(1300).fill(0);
let energy_damage_total_b = new Array(1300).fill(0);
let damage_total_a = new Array(2600).fill(0); //big hit
let damage_total_b = new Array(2600).fill(0); //small hit
let damage_total = new Array(2600).fill(0); //average hit
let damage_total_tens = new Array(260).fill(0); //average hit
let damage_total_above = new Array(260).fill(0); //average hit

let i=0; let j=0; let k=0;
let test2_text="";

for (i=0; i<90; i++) {
  fireball_damage[i+110] = (1/90)*(1/3);
  }//end of fireball for
fireball_damage[0] = 2/3;

for (i=0; i<120; i++) {
  energy_damage[i+300] = (1/120)*(1/10);
  }//end of fireball for
energy_damage[0] = 9/10;

for (let i = 0; i < fireball_damage.length; i++) { //apply first fireball
    fireball_damage_intermediate[i] = fireball_damage[i];
}

for (let i = 0; i < energy_damage.length; i++) { // apply first energy beam
    energy_damage_intermediate[i] = energy_damage[i];
}

//merge fire ball and total. Then cycle 5 times.
for (k=0; k<5; k++) { // loop through number of demons (5.5)
  for (i=0; i<1100; i++) { // loop through running total
    for (j=0; j<200; j++) { // loop through fireball
      fireball_damage_total[i+j] += fireball_damage_intermediate[i] * fireball_damage[j];
      } //end of j loop
    } // end of i loop
  fireball_damage_intermediate = Array.from(fireball_damage_total);
  fireball_damage_total.fill(0);
  
  if(k==3){ // k= 3 -> 5th fb.
    fireball_damage_total_b = Array.from(fireball_damage_intermediate);
    } // end of if

  if(k==4){ // k= 4 -> 6th fb.
    fireball_damage_total = Array.from(fireball_damage_intermediate);
    } // end of if
  } //end of loop fireball

//merge energy veam and total. Then cycle 5 times.
for (k=0; k<2; k++) { // loop through number of demons (5.5)
  for (i=0; i<900; i++) { // loop through running total
    for (j=0; j<420; j++) { // loop through energy
      energy_damage_total[i+j] += energy_damage_intermediate[i] * energy_damage[j];
      } //end of j loop
    } // end of i loop
  energy_damage_intermediate = Array.from(energy_damage_total);
  energy_damage_total.fill(0);
  
  if(k==0){ // k= 3 -> 5th fb.
    energy_damage_total_b = Array.from(energy_damage_intermediate);
    } // end of if

  if(k==1){ // k= 4 -> 6th fb.
    energy_damage_total = Array.from(energy_damage_intermediate);
    } // end of if
  } //end of loop energy

// Fire+energy a
for (i=0; i<1300; i++) {
  for (j=0; j<1300; j++) {
    damage_total_a[i+j] += fireball_damage_total[i] * energy_damage_total[j]; // bit hit
    damage_total_b[i+j] += fireball_damage_total_b[i] * energy_damage_total_b[j]; // small hit
    } // end of i
  } // end of j

for (i=0; i<2600; i++) { // combine big and small hits
damage_total[i] = (damage_total_a[i] + damage_total_b[i])/2;
} // end of for

for (i=0; i<2600; i++) { // shrink to 10s
damage_total_tens[Math.floor(i/10)] += damage_total[i];
} // end of for

damage_total_above[259] = damage_total_tens[259];
for (i=258; i>=0; i--) { // accumulate
damage_total_above[i] =
  damage_total_above[i+1] + damage_total_tens[i];
} // end of for

document.getElementById('test2').innerHTML = 
"end of code<br>";


for (i=0; i<260; i++) { // print
   test2_text += 10*i + "\t" + damage_total_tens[i] + "\t" + damage_total_above[i] + "<br>";
    } // end of for print
    document.getElementById('test2').innerHTML += test2_text;


} // end of calc distrib

calculate_distrib();

const xValues = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 270, 280, 290, 300, 310, 320, 330, 340, 350, 360, 370, 380, 390, 400, 410, 420, 430, 440, 450, 460, 470, 480, 490, 500, 510, 520, 530, 540, 550, 560, 570, 580, 590, 600, 610, 620, 630, 640, 650, 660, 670, 680, 690, 700, 710, 720, 730, 740, 750, 760, 770, 780, 790, 800, 810, 820, 830, 840, 850, 860, 870, 880, 890, 900, 910, 920, 930, 940, 950, 960, 970, 980, 990, 1000, 1010, 1020, 1030, 1040, 1050, 1060, 1070, 1080, 1090, 1100, 1110, 1120, 1130, 1140, 1150, 1160, 1170, 1180, 1190, 1200, 1210, 1220, 1230, 1240, 1250, 1260, 1270, 1280, 1290, 1300, 1310, 1320, 1330, 1340, 1350, 1360, 1370, 1380, 1390, 1400, 1410, 1420, 1430, 1440, 1450, 1460, 1470, 1480, 1490, 1500, 1510, 1520, 1530, 1540, 1550, 1560, 1570, 1580, 1590, 1600, 1610, 1620, 1630, 1640, 1650, 1660, 1670, 1680, 1690, 1700, 1710, 1720, 1730, 1740, 1750, 1760, 1770, 1780, 1790, 1800, 1810, 1820, 1830, 1840, 1850, 1860, 1870, 1880, 1890, 1900, 1910, 1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020, 2030, 2040, 2050, 2060, 2070, 2080, 2090, 2100];
const yValues = [1.0, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.2, 1.2, 1.2, 1.3, 1.3, 1.4, 1.4, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 1.5, 1.6, 1.6, 1.7, 1.8, 1.9, 2.0, 2.1, 2.2, 2.3, 2.3, 2.4, 2.4, 2.5, 2.5, 2.6, 2.7, 2.8, 2.9, 3.0, 3.1, 3.3, 3.5, 3.7, 3.9, 4.1, 4.3, 4.5, 4.7, 4.9, 5.0, 5.2, 5.4, 5.6, 5.8, 6.1, 6.3, 6.7, 7.0, 7.5, 7.9, 8.4, 8.9, 9.5, 10.1, 10.7, 11.2, 11.8, 12.4, 13.0, 13.6, 14.3, 15.0, 15.8, 16.7, 17.8, 18.9, 20.2, 22, 23, 25, 27, 29, 31, 33, 35, 37, 39, 42, 44, 47, 50, 53, 57, 61, 66, 71, 77, 83, 90, 97, 104, 112, 120, 129, 138, 148, 159, 170, 183, 197, 212, 229, 249, 270, 294, 320, 349, 380, 414, 450, 489, 531, 576, 624, 677, 734, 798, 868, 947, 1035, 1134, 1245, 1370, 1509, 1664, 1836, 2024, 2231, 2456, 2701, 2968, 3259, 3577, 3927, 4315, 4747, 5230, 5774, 6387, 7078, 7858, 8737, 9723, 10827, 12057, 13424, 14936, 16605, 18448, 20482, 22735, 25237, 28032, 31168, 34709, 38726, 43302, 48532, 54524, 61395, 69277, 78310, 88651, 100469, 113954, 129321, 146823, 166766, 189527, 215579, 245523, 280114, 320304, 367283, 422530, 487872, 565554, 658316, 769489, 903102, 1064003, 1258015, 1492116, 1774687, 2115849, 2527951, 3026285, 3630132, 4364272, 5261110, 6363672, 7729798, 9438095];

/*const barColors = ["red", "green","blue","orange","brown"];*/

new Chart("myChart", {
  type: "bar",
  data: {
    labels: xValues,
    datasets: [{
      //backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "World Wine Production 2018"
    }
  }
});

</script>

</body>
</html>
