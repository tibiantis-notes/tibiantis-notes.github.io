<!DOCTYPE html>
<html>

<head>
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  padding-left: 5px;
  padding-right: 5px;
  text-align: center;
}
img {
  image-rendering: pixelated; /* Nearest-neighbor scaling */
}

</style>

<meta name="description" content="Tibiantis Notes - Tibia 7.4 Annihilator Quest">
  <meta name="keywords" content="Tibiantis, Tibia, 7.4, anni, annihilator">
<meta title ="Tibiantis Notes - Annihilator quest">
<meta name="author" content="Tarsal">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

</head>


<body>
<a href="https://tibiantis-notes.github.io/">Home</a>
<h1>Tibia 7.4/ Tibiantis notes</h1>
<p><i>by Tarsal.</i></p>
<hr>
  

<div style="width: 900px">
<h1>Annihilator Quest</h1>

<h2>Introduction</h2>

This page discusses the Annihilator quest. An infamously difficult test of strength, skill and luck.<br><br>

<h2>Damage Analysis - set up</h2>
The quest must be completed by 4 Lv100+ players. There are 6 demons, and each of the four players can be hit by up to 3 energy beams.<br><br>

Demons cast fireballs dealing 110-200 fire damage with a chance of 1/3, and energy damage beams of damage 300-420 with a chance of 1/10. Due to CIP code, the 5 demons that are not in melee range will roll the chance to cast every second and the remaining demon every two seconds.<br><br>

The average damage on turn 1 and 2 is therefore 310 + 108 = 418, and 258 + 72 = 330, for an overall average of 374 damage.<br><br>

<h2>Damage Analysis - result</h2>

<canvas id="myChart" style="width:100%;max-width:600px"></canvas>

<script>
const xValues = ["Italy", "France", "Spain", "USA", "Argentina"];
const yValues = [0.5, 1, 2, 3, 4];
const barColors = ["red", "green","blue","orange","brown"];

new Chart("myChart", {
  type: "bar",
  data: {
    labels: xValues,
    datasets: [{
      backgroundColor: barColors,
      data: yValues
    }]
  },
  options: {
    legend: {display: false},
    title: {
      display: true,
      text: "World Wine Production 2018"
    }
  }
});

</script>

<p id="test1"></p>
<p id="test2"></p>

</div>

<script>

function calculate_distrib() {


document.getElementById('test1').innerHTML = "Start of code<br>";

let fireball_damage = new Array(200).fill(0);
let fireball_damage_intermediate = new Array(1300).fill(0);
let fireball_damage_total = new Array(1300).fill(0);
let fireball_damage_total_b = new Array(1300).fill(0);
let energy_damage = new Array(420).fill(0);
let energy_damage_intermediate = new Array(1300).fill(0);
let energy_damage_total = new Array(1300).fill(0);
let energy_damage_total_b = new Array(1300).fill(0);
let damage_total_a = new Array(2600).fill(0); //big hit
let damage_total_b = new Array(2600).fill(0); //small hit
let damage_total = new Array(2600).fill(0); //average hit
let damage_total_tens = new Array(260).fill(0); //average hit
let damage_total_above = new Array(260).fill(0); //average hit

let i=0; let j=0; let k=0;
let test2_text="";

for (i=0; i<90; i++) {
  fireball_damage[i+110] = (1/90)*(1/3);
  }//end of fireball for
fireball_damage[0] = 2/3;

for (i=0; i<120; i++) {
  energy_damage[i+300] = (1/120)*(1/10);
  }//end of fireball for
energy_damage[0] = 9/10;

for (let i = 0; i < fireball_damage.length; i++) { //apply first fireball
    fireball_damage_intermediate[i] = fireball_damage[i];
}

for (let i = 0; i < energy_damage.length; i++) { // apply first energy beam
    energy_damage_intermediate[i] = energy_damage[i];
}

//merge fire ball and total. Then cycle 5 times.
for (k=0; k<5; k++) { // loop through number of demons (5.5)
  for (i=0; i<1100; i++) { // loop through running total
    for (j=0; j<200; j++) { // loop through fireball
      fireball_damage_total[i+j] += fireball_damage_intermediate[i] * fireball_damage[j];
      } //end of j loop
    } // end of i loop
  fireball_damage_intermediate = Array.from(fireball_damage_total);
  fireball_damage_total.fill(0);
  
  if(k==3){ // k= 3 -> 5th fb.
    fireball_damage_total_b = Array.from(fireball_damage_intermediate);
    } // end of if

  if(k==4){ // k= 4 -> 6th fb.
    fireball_damage_total = Array.from(fireball_damage_intermediate);
    } // end of if
  } //end of loop fireball

//merge energy veam and total. Then cycle 5 times.
for (k=0; k<2; k++) { // loop through number of demons (5.5)
  for (i=0; i<900; i++) { // loop through running total
    for (j=0; j<420; j++) { // loop through energy
      energy_damage_total[i+j] += energy_damage_intermediate[i] * energy_damage[j];
      } //end of j loop
    } // end of i loop
  energy_damage_intermediate = Array.from(energy_damage_total);
  energy_damage_total.fill(0);
  
  if(k==0){ // k= 3 -> 5th fb.
    energy_damage_total_b = Array.from(energy_damage_intermediate);
    } // end of if

  if(k==1){ // k= 4 -> 6th fb.
    energy_damage_total = Array.from(energy_damage_intermediate);
    } // end of if
  } //end of loop energy

// Fire+energy a
for (i=0; i<1300; i++) {
  for (j=0; j<1300; j++) {
    damage_total_a[i+j] += fireball_damage_total[i] * energy_damage_total[j]; // bit hit
    damage_total_b[i+j] += fireball_damage_total_b[i] * energy_damage_total_b[j]; // small hit
    } // end of i
  } // end of j

for (i=0; i<2600; i++) { // combine big and small hits
damage_total[i] = (damage_total_a[i] + damage_total_b[i])/2;
} // end of for

for (i=0; i<2600; i++) { // shrink to 10s
damage_total_tens[Math.floor(i/10)] += damage_total[i];
} // end of for

damage_total_above[259] = damage_total_tens[259];
for (i=258; i>=0; i--) { // accumulate
damage_total_above[i] =
  damage_total_above[i+1] + damage_total_tens[i];
} // end of for

document.getElementById('test2').innerHTML = 
"end of code<br>";


for (i=0; i<260; i++) { // print
   test2_text += 10*i + "\t" + damage_total_tens[i] + "\t" + damage_total_above[i] + "<br>";
    } // end of for print
    document.getElementById('test2').innerHTML += test2_text;


} // end of calc distrib

calculate_distrib();


</script>

</body>
</html>
